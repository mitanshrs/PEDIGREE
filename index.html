<!DOCTYPE html>
<html lang="en">
<head>
    <title>PEDIGREE | Home</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="logo.png">
    <script>
        (function() {
            const s = JSON.parse(localStorage.getItem('db_settings')) || {style:'modern', theme:'blue', appearance:'system'};
            const html = document.documentElement;
            html.classList.add('style-' + s.style);
            html.classList.add('theme-' + s.theme);
            let m = s.appearance;
            if (s.style === 'terminal') m = 'dark';
            else if (m === 'system') m = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            html.classList.add('mode-' + m);
        })();
    </script>
</head>
<body>
    <div class="scanline"></div>
    <nav>
        <div style="flex: 1; display: flex; align-items: center; gap: 1rem; justify-content: center; margin-left: 45px;">
            <img src="logo.png" width="35px" height="35px">
            <a href="index.html" style="text-decoration: underline;">Home</a>
            <a href="write.html">Write</a>
            <a href="read.html">Read</a>
            <a href="list.html">List</a>
            <a href="transfer.html">Sync</a>
        </div>
        <div style="width: 45px; display: flex; justify-content: flex-end;">
            <a href="settings.html" title="Settings" style="padding: 0; font-size: 1.2rem;">⚙️</a>
        </div>
    </nav>

    <div class="container">
        <h1 class="title">PEDIGREE</h1>
        <h1>DASHBOARD OVERVIEW</h1>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
            <div class="card" style="text-align: center;">
                <label>REGISTERED BLUEPRINTS</label>
                <div id="c1" style="font-size: 3rem; font-weight: 800; color: var(--accent);">0</div>
            </div>
            <div class="card" style="text-align: center;">
                <label>ACTIVE IDENTITIES</label>
                <div id="c2" style="font-size: 3rem; font-weight: 800; color: var(--accent);">0</div>
            </div>
        </div>

        <button onclick="location.href='write.html'">MAKE NEW REGISTRY</button>
        <button onclick="location.href='help.html'" style="margin-top: 10px; border: 1px solid var(--accent); background: transparent; color: var(--accent);">HELP</button>
    </div>

    <p class="mitansh-ud">By Mitansh Udernani</p>

    <script src="logic.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            // Calculate Blueprint Count
            document.getElementById('c1').innerText = Object.keys(items).length;
            
            // Calculate Total Identity Count
            let identityCount = 0; 
            for(let b in batches) {
                for(let i in batches[b]) {
                    identityCount += Object.keys(batches[b][i]).length;
                }
            }
            document.getElementById('c2').innerText = identityCount;
        });
    </script>
</body>
</html>